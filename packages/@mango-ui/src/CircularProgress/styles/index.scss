@import '../../styles/common';

$circular-progress-cls: #{$prefix-cls}-circular-progress;

.#{$circular-progress-cls} {
  display: inline-block;
  position: relative;
  vertical-align: middle;
  font-size: 48px;
  width: 48px;
  height: 48px;

  // svg
  &-indicator {
    display: block;
    width: 100%;
    height: 100%;

    // width: 48px;
    // height: 48px;

    // bg
    &__bg {
      stroke: var(--es-component-down-bg);
    }

    // bar
    &__bar {
      stroke: var(--es-primary);

      // &.not-indeterminate {
      //   stroke-dashoffset: 66;
      //   transition-duration: 0.6s;
      //   transition-timing-function: ease;
      // }

      // &.indeterminate {
      //   animation: animation-es-circular-progress-bar 1.5s linear infinite;

      //   @keyframes animation-es-circular-progress-bar {
      //     0% {
      //       stroke-dasharray: 1, 400;
      //       stroke-dashoffset: 0;
      //     }
      //     50% {
      //       stroke-dasharray: 400, 400;
      //       stroke-dashoffset: -100;
      //     }
      //     100% {
      //       stroke-dasharray: 400, 400;
      //       stroke-dashoffset: -260;
      //     }
      //   }
      // }
    }

    &[data-state='complete'],
    &[data-state='loading'] {
      .#{$circular-progress-cls}-indicator__bar {
        stroke-dashoffset: 66;
        transition-duration: 0.6s;
        transition-timing-function: ease;
      }
    }

    // indeterminate
    &[data-state='indeterminate'] {
      animation: animation-es-circular-progress 2s linear infinite;

      @keyframes animation-es-circular-progress {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .#{$circular-progress-cls}-indicator__bar {
        animation: animation-es-circular-progress-bar 1.5s linear infinite;

        @keyframes animation-es-circular-progress-bar {
          0% {
            stroke-dasharray: 1, 400;
            stroke-dashoffset: 0;
          }
          50% {
            stroke-dasharray: 400, 400;
            stroke-dashoffset: -100;
          }
          100% {
            stroke-dasharray: 400, 400;
            stroke-dashoffset: -260;
          }
        }
      }
    }
  }

  // label
  &-label {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    text-align: center;
    transform: translate(-50%, -50%);
    font-size: 0.24em;
  }
}
