import{j as E}from"./jsx-runtime-bkLU2cdM.js";import{R as u}from"./index-eK40FDle.js";import{u as G}from"./use-controlled-3NL49yyH.js";import{S as A}from"./slot-Ej57t_-l.js";import{u as H}from"./use-merged-ref-IdjoZWBX.js";import{u as J}from"./use-portal-_c5zPIwn.js";const z=u.createContext({triggerRef:{current:null},handleOpen:()=>{},handleClose:()=>{}});function O(o){const{open:e,defaultOpen:r,children:l,onOpenChange:n}=o,[c,t]=G(e,r),i=u.useRef(null),a=u.useCallback(()=>{c||(t(!0),n==null||n(!0))},[n,c,t]),d=u.useCallback(()=>{t(!1),n==null||n(!1)},[n,t]),p=u.useMemo(()=>({open:c,triggerRef:i,handleOpen:a,handleClose:d}),[d,a,c]);return E.jsx(z.Provider,{value:p,children:l})}O.displayName="Popover";O.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{open:{required:!1,tsType:{name:"boolean"},description:"Popover open 여부"},defaultOpen:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:`Popover.Trigger 클릭시 open = true,
Popover close action(blur/esc) 발생시 open = false`}}};const _=u.forwardRef((o,e)=>{const{children:r,asChild:l,onClick:n,...c}=o,{handleClose:t}=u.useContext(z),i=l?A:"button",a=d=>{t(),n==null||n(d)};return E.jsx(i,{type:"button",...c,ref:e,onClick:a,children:r??"Close"})});_.displayName="Popover.Close";const Q=_;_.__docgenInfo={description:"",methods:[],displayName:"Popover.Close"};function U(o,e){let r,l,n,c,t,i,a=0;if(typeof o!="function")throw new TypeError("Expected a function");e=+e||0;function d(s){const f=r,w=l;return r=l=void 0,a=s,c=o.apply(w,f),c}function p(s,f){return setTimeout(s,f)}function v(s){clearTimeout(s)}function R(s){return a=s,t=p(b,e),c}function x(s){const f=s-(i??0);return e-f}function T(s){const f=s-(i??0),w=s-a;return i===void 0||f>=e||f<0||w>=n}function b(){const s=Date.now();if(T(s))return m(s);t=p(b,x(s))}function m(s){return t=void 0,r?d(s):(r=l=void 0,c)}function C(){t!==void 0&&v(t),a=0,r=i=l=t=void 0}function P(){return t===void 0?c:m(Date.now())}function I(){return t!==void 0}function g(...s){const f=Date.now(),w=T(f);return r=s,l=this,i=f,w&&t===void 0?R(i):(t===void 0&&(t=p(b,e)),c)}return g.cancel=C,g.flush=P,g.pending=I,g}function X(o,e){typeof o=="function"?o(e):o&&(o.current=e)}function Z(o){let e=typeof o=="function"?o():o;return e=e??document.body,e}function V(o,e){let r=0;return e==="center"?r=o.height/2:e==="bottom"&&(r=o.height),r}function M(o,e){let r=0;return e==="center"?r=o.width/2:e==="right"&&(r=o.width),r}function ee(o){return o||{top:0,left:0}}function S({triggerEl:o,popoverContentEl:e,triggerPosition:r,contentPosition:l,position:n,containerEl:c}){if(e){if((n==null?void 0:n.top)!==void 0&&(n==null?void 0:n.left)!==void 0){const{top:t,left:i}=n;e.style.top=`${t}px`,e.style.left=`${i}px`}else{const t=o??document.body,i=t.getBoundingClientRect();let a=(i==null?void 0:i.top)+V(i,r==null?void 0:r.vertical),d=(i==null?void 0:i.left)+M(i,r==null?void 0:r.horizontal);const p={width:e.offsetWidth,height:e.offsetHeight},v={vertical:V(p,l==null?void 0:l.vertical),horizontal:M(p,l==null?void 0:l.horizontal)},R=c??document.body,T=R.style.position==="relative"?R.getBoundingClientRect():null,{top:b,left:m}=ee(T);a-=v.vertical-(T?0:window.scrollY),d-=v.horizontal;const C=a+p.height,P=d+p.width,g=((t==null?void 0:t.ownerDocument)||document).defaultView||window,s=16,f=g.innerHeight-s,w=g.innerWidth-s;if(a<s){const y=a-s;v.vertical+=y}else if(C>f+window.scrollY){const y=i.height+p.height;a-=y,v.vertical+=y}if(d<s){const y=d-s;d-=y,v.horizontal+=y}else if(P>w){const y=P-w;d-=y,v.horizontal+=y}a-=b,d-=m,e.style.top=`${a}px`,e.style.left=`${d}px`,e.style.transformOrigin=`${v.horizontal}px ${v.vertical}px`}e.focus()}}const Y=u.createContext({});function D(o){const{container:e,children:r}=o,{Portal:l,target:n}=J(e),c=u.useMemo(()=>({containerEl:n}),[n]);return E.jsx(Y.Provider,{value:c,children:E.jsx(l,{children:r})})}D.displayName="Popover.Portal";D.__docgenInfo={description:"",methods:[],displayName:"Popover.Portal",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},container:{required:!1,tsType:{name:"ContainerType"},description:`Popover 이 mount 되는 node (해당 node에는 position: relative 속성이 필요.)
@default document.body`}}};const L=u.forwardRef((o,e)=>{const{role:r,style:l,triggerPosition:n={vertical:"bottom",horizontal:"left"},contentPosition:c,position:t,zIndex:i=1300,destroyOnClose:a=!0,forceMount:d,closeOnEsc:p=!0,closeOnBlur:v=!0,children:R,onBlur:x,onKeyDown:T,...b}=o,{open:m,triggerRef:C,handleClose:P}=u.useContext(z),{containerEl:I}=u.useContext(Y),g=u.useRef(null),s=H(g,e),f=u.useRef(!0),w=h=>{var B;const k=h.target??h.currentTarget,{activeElement:W}=k.ownerDocument,N=h.relatedTarget??W,K=g.current===N||((B=g.current)==null?void 0:B.contains(N)),$=Z(C.current);let q=$===N||$.contains(N);!C.current&&(t==null?void 0:t.top)!==void 0&&(t==null?void 0:t.left)!==void 0&&(q=!1),m&&v&&(!K&&!q)&&P(),x==null||x(h)},y=h=>{p&&h.key==="Escape"&&P(),T==null||T(h)},F=u.useCallback(h=>{X(s,h),S({triggerEl:C.current,popoverContentEl:g.current,triggerPosition:n,contentPosition:c,position:t,containerEl:I})},[I,c,s,t,n,C]);return u.useEffect(()=>{if(!m)return;const h=U(()=>{S({triggerEl:C.current,popoverContentEl:g.current,triggerPosition:n,contentPosition:c,position:t,containerEl:I})},10),k=C.current,N=((k==null?void 0:k.ownerDocument)||document).defaultView||window;return window.addEventListener("scroll",h,{capture:!0}),N.addEventListener("resize",h),()=>{h.cancel(),window.removeEventListener("scroll",h),N.removeEventListener("resize",h)}},[I,c,m,t,n,C]),u.useEffect(()=>{m&&(f.current=!1)},[m]),f.current&&!m&&!d||!m&&!d&&a?null:E.jsx("div",{"data-state":m?"open":"closed",...b,ref:F,role:r,tabIndex:-1,style:{position:"absolute",display:m?void 0:"none",opacity:m?1:0,zIndex:i,...l},onBlur:w,onKeyDown:y,children:R})});L.displayName="Popover.Content";const te=L;L.__docgenInfo={description:"",methods:[],displayName:"Popover.Content"};const j=u.forwardRef((o,e)=>{const{children:r,asChild:l,onClick:n,...c}=o,{open:t,triggerRef:i,handleOpen:a,handleClose:d}=u.useContext(z),p=H(i,e),v=l?A:"button",R=x=>{t?d():a(),n==null||n(x)};return E.jsx(v,{type:"button","data-state":t?"open":"closed",...c,ref:p,onClick:R,children:r??"Popover"})});j.displayName="Popover.Trigger";const ne=j;j.__docgenInfo={description:"",methods:[],displayName:"Popover.Trigger"};const de={Root:O,Trigger:ne,Portal:D,Content:te,Close:Q};export{de as P,z as a};
